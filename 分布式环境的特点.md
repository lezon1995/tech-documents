# 分布式环境的特点

## 分布性

## 并发性(进程级别)

### 程序运行过程中,并发性操作是很常见的,比如同一个分布式系统中的多个节点,同时访问一个共享资源,如数据库,分布式存储之类的.

## 无序性

### 进程之间的消息通信会出现顺序不一致的问题.

# 分布式环境下面临的问题

## 网络通信

### 网络本身的不可靠性,因此会涉及到一些网络通信的问题,比如线路老化,天气原因,人为因素等等.

## 网络分区(脑裂)

### 当网络发生异常导致分布式系统中的部分节点之间的网络延迟不断增大,最终导致组成分布式架构中的所有节点,只有部分节点能够正常工作.

## 三态

### 在分布式架构里面,除了成功失败还有超时

# 中心化和去中心化

## 在分布式架构里面,很多的架构思想采用的是:当集群发生故障的时候,集群中的人会自动"选举"出一个新的领导,最典型的例子就是zookeeper和etcd

# 经典的CAP/BASE理论

## CAP

### 一致性 **<u>consistency</u>**:所有节点上的数据时刻保持一致

### 可用性 <u>availability</u>:每个请求都能收到一个响应,无论响应成功或者失败

### 分区容错性 <u>partition-tolerance</u>:系统出现脑裂之后,可能导致某些server与集群中的其他机器失去联系

## CAP理论仅适用于原子读写的NoSql场景,不适用于数据库系统

## BASE

### <u>Basically available</u>:基本可用

### <u>Soft-state</u>:软状态

### <u>Eventually consistent</u>:数据最终一致性

# Zookeeper

## zookeeper是一个开源的分布式协调服务,是有雅虎创建,基于google chubby

## 分布式数据一致性的解决方案

## zookeeper能做什么

- ### 数据的发布/订阅(配置中心:disconf)

- ### 负载均衡(dubbo+zookeeper)

- ### 命名服务

- ### master选举(kafka Hadoop hbase)

- ### 分布式队列

- ### 分布式锁

## zookeeper的特性

- ### 顺序一致性 从同一个客户端发起的事务请求,最终都会严格的按照顺序被应用到zookeeper中

- ### 原子性